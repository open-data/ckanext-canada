{% set organizations_available = h.organizations_available('create_dataset') %}

{% if organizations_available|length > 12 %}

  {% import 'macros/form.html' as form %}

  {% set org_required = not h.check_config_permission('create_unowned_dataset') %}

  {% call form.input_block('field-organizations',
    label=h.scheming_language_text(field.label),
    error=errors[field.field_name],
    is_required=org_required,
    classes=field.classes if 'classes' in field else ['form-group', 'control-medium'],
    extra_html=caller() if caller,
    ) %}
      <div {{
        form.attributes(field.form_attrs) if 'form_attrs' in field else '' }}>
        <input id="field-organizations"
          type="text"
          name="owner_org"
          value="{{ h.split_piped_bilingual_field(field.title, h.lang()) }}"
          placeholder="{{ _('Search organizations...') }}"
          data-module="autocomplete"
          data-module-source="/organization/autocomplete?q=?"
          data-module-key="id"
          data-module-label="title"
          data-module-dropdownClass="org-select2-dropdown"
          data-module-containerClass="org-select2-container"
          data-module-tags="false"
          data-module-createtags="false"
          class="control-medium"
          />
        {%- snippet 'scheming/form_snippets/help_text.html', field=field %}
      </div>
  {% endcall %}

{% else %}

  {% extends "scheming/form_snippets/organization.html" %}

{% endif %}
