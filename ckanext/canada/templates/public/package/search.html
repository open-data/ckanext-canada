{# vim: set filetype=jinja sw=2 sts=2: #}
{% ckan_extends %}
{% import 'macros/canada_read.html' as cr %}

{%- block api_access_info -%}
  <!-- We want this block to be empty in the canada extension -->
{%- endblock -%}

{%- macro res_label(format) -%}
  {{- cr.resource_format(format.name, h.lang()) -}}
{%- endmacro -%}

{%- macro license_lookup(license) -%}
  {{- cr.license_name(license.name, h.lang()) -}}
{%- endmacro -%}

{% block secondary_content %}
  {{ h.snippet('snippets/facet_list.html', title=c.facet_titles['tags'],
    name='tags') }}
  {{ h.snippet('snippets/facet_list.html', title=c.facet_titles['raw_geo'],
    name='raw_geo') }}
  {{ h.snippet('snippets/facet_list.html', title=c.facet_titles['res_format'],
    name='res_format', label_function=res_label) }}
  {{ h.snippet('snippets/facet_list.html', title=c.facet_titles['license_id'],
    name='license_id', label_function=license_lookup) }}
  <section>
    {% set license = h.get_license('ca-ogl-lgo') %}
    {% if h.lang() == 'en' %}
      <a href={{ license.url }}>View the {{ license.title }}</a>
    {% else %}
      <a href={{ license.url_fra }}>Voir la {{
        license.title_fra[:1].lower() }}{{ license.title_fra[1:] }}</a>
    {% endif %}
  </section>
{% endblock %}
